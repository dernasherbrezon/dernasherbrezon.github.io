<!DOCTYPE html>
<html lang='en' dir='auto'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='In recent months, I have been working on reducing power consumption in the lora-at project. The idea is to create a self-sufficient receiver, place it on the balcony, and receive signals from satellites 24/7. Easier said than done, especially for those who have never optimized code for low power consumption or designed electrical circuits. Of course, you could install the largest solar panel, receive signals only during the day, and not worry about it.'>
<meta name='theme-color' content='#ffcd00'>

<meta property='og:title' content='Optimizing LoRa power consumption • dernasherbrezon'>
<meta property='og:description' content='In recent months, I have been working on reducing power consumption in the lora-at project. The idea is to create a self-sufficient receiver, place it on the balcony, and receive signals from satellites 24/7. Easier said than done, especially for those who have never optimized code for low power consumption or designed electrical circuits. Of course, you could install the largest solar panel, receive signals only during the day, and not worry about it.'>
<meta property='og:url' content='https://dernasherbrezon.com/en/posts/lora-deep-sleep/'>
<meta property='og:site_name' content='dernasherbrezon'>
<meta property='og:type' content='article'><meta property='article:section' content='posts'><meta property='article:tag' content='c'><meta property='article:tag' content='lora'><meta property='article:tag' content='esp32'><meta property='article:tag' content='embedded'><meta property='article:published_time' content='2022-12-10T21:17:18&#43;01:00'/><meta property='article:modified_time' content='2022-12-10T21:17:18&#43;01:00'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@dernasherbrezon'>

<meta name="generator" content="Hugo 0.124.0">

  <title>Optimizing LoRa power consumption • dernasherbrezon</title>
  <link rel='canonical' href='https://dernasherbrezon.com/en/posts/lora-deep-sleep/'>
  
    <link href="https://dernasherbrezon.com/en/posts/lora-deep-sleep/index.xml" rel="alternate" type="application/rss+xml" title="dernasherbrezon" />
  
  <link rel='alternate' hreflang='en' href='https://dernasherbrezon.com/en/posts/lora-deep-sleep/'><link rel='alternate' hreflang='ru' href='https://dernasherbrezon.com/posts/lora-deep-sleep/'><link rel='alternate' hreflang='x-default' href='https://dernasherbrezon.com/posts/lora-deep-sleep/'>
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.ab98e12b.css'><link rel='stylesheet' href='/css/custom.1.css'><style>
:root{--color-accent:#ffcd00;}
</style>

  <meta name="telegram:channel" content="@dernasherbrezonChannel">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
</head>
<body class='page type-posts has-sidebar'>

  <div class='site'><div id='sidebar' class='sidebar'>
  <a class='screen-reader-text' href='#main-menu'>Skip to Main Menu</a>

  <div class='container'><section class='widget widget-about sep-after'>
  <header>
    
    <div class='logo'>
      <a href='/en/'>
        <img src='/img/logo.jpeg'>
      </a>
    </div>
    
    <h2 class='title site-title '>
      <a href='/en/'>
      dernasherbrezon
      </a>
    </h2>
    <div class='desc'>
    Blog about software development
    </div>
  </header>

</section>
<section class='widget widget-taxonomy_cloud sep-after'>
  <header>
    <h4 class='title widget-title'>Tags</h4>
  </header>

  <div class='container list-container'>
  <ul class='list taxonomy-cloud'><li>
        <a href='/en/tags/admin/' style='font-size:1.4285714285714286em'>Admin</a>
      </li><li>
        <a href='/en/tags/apt/' style='font-size:1em'>Apt</a>
      </li><li>
        <a href='/en/tags/bluetooth/' style='font-size:1.1428571428571428em'>Bluetooth</a>
      </li><li>
        <a href='/en/tags/c/' style='font-size:1.5714285714285714em'>C</a>
      </li><li>
        <a href='/en/tags/deb/' style='font-size:1em'>Deb</a>
      </li><li>
        <a href='/en/tags/dsp/' style='font-size:1em'>Dsp</a>
      </li><li>
        <a href='/en/tags/embedded/' style='font-size:1.1428571428571428em'>Embedded</a>
      </li><li>
        <a href='/en/tags/esp-idf/' style='font-size:1.1428571428571428em'>Esp-Idf</a>
      </li><li>
        <a href='/en/tags/esp32/' style='font-size:2em'>Esp32</a>
      </li><li>
        <a href='/en/tags/grafana/' style='font-size:1em'>Grafana</a>
      </li><li>
        <a href='/en/tags/java/' style='font-size:1.2857142857142856em'>Java</a>
      </li><li>
        <a href='/en/tags/lora/' style='font-size:1.8571428571428572em'>Lora</a>
      </li><li>
        <a href='/en/tags/lora-at/' style='font-size:1.2857142857142856em'>Lora-At</a>
      </li><li>
        <a href='/en/tags/maven/' style='font-size:1.1428571428571428em'>Maven</a>
      </li><li>
        <a href='/en/tags/monitoring/' style='font-size:1.1428571428571428em'>Monitoring</a>
      </li><li>
        <a href='/en/tags/peformance/' style='font-size:1em'>Peformance</a>
      </li><li>
        <a href='/en/tags/performance/' style='font-size:1em'>Performance</a>
      </li><li>
        <a href='/en/tags/ppk2/' style='font-size:1.1428571428571428em'>PPK2</a>
      </li><li>
        <a href='/en/tags/prometheus/' style='font-size:1em'>Prometheus</a>
      </li><li>
        <a href='/en/tags/r2cloud/' style='font-size:1em'>R2cloud</a>
      </li><li>
        <a href='/en/tags/r2lora/' style='font-size:1.4285714285714286em'>R2lora</a>
      </li><li>
        <a href='/en/tags/raspberrypi/' style='font-size:1.2857142857142856em'>Raspberrypi</a>
      </li><li>
        <a href='/en/tags/s3/' style='font-size:1em'>S3</a>
      </li><li>
        <a href='/en/tags/sx127x/' style='font-size:1.1428571428571428em'>Sx127x</a>
      </li><li>
        <a href='/en/tags/testing/' style='font-size:1.2857142857142856em'>Testing</a>
      </li><li>
        <a href='/en/tags/ubuntu/' style='font-size:1em'>Ubuntu</a>
      </li></ul>
</div>


</section>
</div>

  <div class='sidebar-overlay'></div>
</div><div class='main'><nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    <a class='screen-reader-text' href='#content'>Skip to Content</a>

<button id='sidebar-toggler' class='sidebar-toggler' aria-controls='sidebar'>
  <span class='screen-reader-text'>Toggle Sidebar</span>
  <span class='open'><svg class='icon' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    
  <line x1="3" y1="12" x2="21" y2="12" />
  <line x1="3" y1="6" x2="21" y2="6" />
  <line x1="3" y1="18" x2="21" y2="18" />

</svg>
</span>
  <span class='close'><svg class='icon' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />

</svg>
</span>
</button>
    <ul></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>dernasherbrezon</p><p class='desc site-desc'>Blog about software development</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Optimizing LoRa power consumption</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>

</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2022-12-10T21:17:18&#43;01:00'>10 Dec 2022</time>
</span>

  
  

</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  <p>In recent months, I have been working on reducing power consumption in the <a href="https://github.com/dernasherbrezon/lora-at">lora-at</a> project. The idea is to create a self-sufficient receiver, place it on the balcony, and receive signals from satellites 24/7. Easier said than done, especially for those who have never optimized code for low power consumption or designed electrical circuits. Of course, you could install the largest solar panel, receive signals only during the day, and not worry about it. However, I found this approach unworthy of an engineer, so I took on the challenge and started designing.</p>
<h2 id="general-design">General design</h2>
<p>Before optimizing power consumption, it is necessary to understand the electrical circuitry and program algorithm.</p>
<div>


	<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg"
	xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
	preserveAspectRatio="xMinYMin meet" viewBox="-0.5 -0.5 421 211">
<defs />
<g>
<path d="M 80 70 L 113.63 70" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 118.88 70 L 111.88 73.5 L 113.63 70 L 111.88 66.5 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<rect x="0" y="40" width="80" height="60" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 70px; margin-left: 1px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Solar<br />panel 6v
		</div>
	</div>
</div>
</foreignObject>
<text x="40" y="74" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Solar&#xa;panel 6v</text></switch></g>
<path d="M 206.37 70 L 220 70 L 220 20 L 233.63 20" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 201.12 70 L 208.12 66.5 L 206.37 70 L 208.12 73.5 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 238.88 20 L 231.88 23.5 L 233.63 20 L 231.88 16.5 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 200 85 L 340 85 L 340 113.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 340 118.88 L 336.5 111.88 L 340 113.63 L 343.5 111.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 160 100 L 160 113.63" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 160 118.88 L 156.5 111.88 L 160 113.63 L 163.5 111.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<rect x="120" y="40" width="80" height="60" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 70px; margin-left: 121px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Controller</div>
	</div>
</div>
</foreignObject>
<text x="160" y="74" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Controller</text></switch></g>
<rect x="240" y="0" width="120" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 20px; margin-left: 241px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Battery
			3.7v</div>
	</div>
</div>
</foreignObject>
<text x="300" y="24" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Battery 3.7v</text></switch></g>
<rect x="280" y="120" width="120" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 140px; margin-left: 281px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">ESP32</div>
	</div>
</div>
</foreignObject>
<text x="340" y="144" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">ESP32</text></switch></g>
<rect x="360" y="80" width="60" height="30" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 95px; margin-left: 361px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">JST
			connector</div>
	</div>
</div>
</foreignObject>
<text x="390" y="99" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">JST connector</text></switch></g>
<path d="M 220 140 L 273.63 140" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 278.88 140 L 271.88 143.5 L 273.63 140 L 271.88 136.5 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<rect x="100" y="120" width="120" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 140px; margin-left: 101px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Voltage<br />divider
		</div>
	</div>
</div>
</foreignObject>
<text x="160" y="144" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Voltage&#xa;divider</text></switch></g>
<rect x="200" y="160" width="80" height="50" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 185px; margin-left: 201px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Battery<br />charge<br />level
		</div>
	</div>
</div>
</foreignObject>
<text x="240" y="189" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Batterychargelevel...</text></switch></g></g>
<switch>
<g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" />
<a transform="translate(0,-5)"
	xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems"
	target="_blank"><text text-anchor="middle" font-size="10px" x="50%"
		y="100%">Text is not SVG - cannot display</text></a></switch></svg>

</div>
<p>The idea is quite simple:</p>
<ul>
<li>A 6V solar panel is connected to a special controller.</li>
<li>This controller should do the following:
<ul>
<li>Charge the battery.</li>
<li>Monitor the charging voltage and battery discharge level.</li>
<li>Disconnect the battery from the load during heavy discharge.</li>
<li>Monitor the current consumption from the solar panel (MPTT).</li>
</ul>
</li>
<li>A Li-ion battery should operate at night when there is no sun, and the panel does not generate enough energy.</li>
<li>ESP32 board with LoRa receiver.</li>
<li>(Optional) Voltage divider for monitoring battery charge.</li>
</ul>
<p>Since the scheme is quite standard, you can find <a href="https://www.youtube.com/watch?v=WdP4nVQX-j0">many different guides</a> and descriptions online.</p>
<h2 id="algorithm">Algorithm</h2>
<p>The software part is not as colorful as &ldquo;hello world&rdquo; and is more complex to find. The primary and only way to reduce power consumption is to put the processor into deep sleep mode. In this mode, most processor modules are turned off, and power consumption is minimal — 10 microamps.</p>
<p><img src="/posts/lora-deep-sleep/img/4.png"></p>
<p>The ordinary linear program changes completely in this mode. I came up with the following algorithm:</p>
<div>


	<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg"
	xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
	viewBox="-0.5 -0.5 486 721">
<defs />
<g>
<path d="M 195 190 L 195 223.63" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 195 228.88 L 191.5 221.88 L 195 223.63 L 198.5 221.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<rect x="135" y="150" width="120" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 170px; margin-left: 136px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Get<br />observation time<br />
		</div>
	</div>
</div>
</foreignObject>
<text x="195" y="174" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Получитьвремя
наблюдения...</text></switch></g>
<path d="M 195 110 L 195 143.63" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 195 148.88 L 191.5 141.88 L 195 143.63 L 198.5 141.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 255 75 L 355 75 L 355 103.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 355 108.88 L 351.5 101.88 L 355 103.63 L 358.5 101.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 195 40 L 255 75 L 195 110 L 135 75 Z"
	fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 75px; margin-left: 136px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			<span
				style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; text-align: center; text-indent: 0px; text-transform: none; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 249, 250); text-decoration: none; float: none; display: inline !important;">Exit
				from</span><br
				style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; text-align: center; text-indent: 0px; text-transform: none; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" />
			<span
				style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; text-align: center; text-indent: 0px; text-transform: none; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 249, 250); text-decoration: none; float: none; display: inline !important;">sleep?</span>
		</div>
	</div>
</div>
</foreignObject>
<text x="195" y="79" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Выход из...</text></switch></g>
<path d="M 255 275 L 355 275 L 355 673.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 355 678.88 L 351.5 671.88 L 355 673.63 L 358.5 671.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 195 320 L 195 340 L 195 330 L 195 343.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 195 348.88 L 191.5 341.88 L 195 343.63 L 198.5 341.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 195 230 L 255 275 L 195 320 L 135 275 Z"
	fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 275px; margin-left: 136px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Start<br />observation?
		</div>
	</div>
</div>
</foreignObject>
<text x="195" y="279" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Настало время...</text></switch></g>
<path d="M 355 150 L 355 183.63" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 355 188.88 L 351.5 181.88 L 355 183.63 L 358.5 181.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<rect x="295" y="110" width="120" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 130px; margin-left: 296px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Await
			command</div>
	</div>
</div>
</foreignObject>
<text x="355" y="134" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Ожидать команду</text></switch></g>
<rect x="295" y="680" width="120" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 700px; margin-left: 296px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Enter
			deep sleep</div>
	</div>
</div>
</foreignObject>
<text x="355" y="704" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Перейти в режим сна</text></switch></g>
<path d="M 355 260 L 355 673.63" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 355 678.88 L 351.5 671.88 L 355 673.63 L 358.5 671.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 435 225 L 455 225 L 455 130 L 421.37 130" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 416.12 130 L 423.12 126.5 L 421.37 130 L 423.12 133.5 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 355 190 L 435 225 L 355 260 L 275 225 Z"
	fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 225px; margin-left: 276px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Inactivity <br />timeout?
		</div>
	</div>
</div>
</foreignObject>
<text x="355" y="229" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Таймер...</text></switch></g>
<path d="M 195 390 L 195 423.63" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 195 428.88 L 191.5 421.88 L 195 423.63 L 198.5 421.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<rect x="135" y="350" width="120" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 370px; margin-left: 136px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Start
			LoRa RX</div>
	</div>
</div>
</foreignObject>
<text x="195" y="374" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Запустить приёмник LoRa</text></switch></g>
<path d="M 170 640 L 355 640 L 355 673.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 355 678.88 L 351.5 671.88 L 355 673.63 L 358.5 671.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 50 640 L 25 640 L 25 410 L 188.63 410" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 193.88 410 L 186.88 413.5 L 188.63 410 L 186.88 406.5 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 110 600 L 170 640 L 110 680 L 50 640 Z"
	fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 640px; margin-left: 51px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Observation<br />complete?
		</div>
	</div>
</div>
</foreignObject>
<text x="110" y="644" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Наблюдение&#xa;завершено?</text></switch></g>
<rect x="255" y="50" width="50" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 60px; margin-left: 256px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">No</div>
	</div>
</div>
</foreignObject>
<text x="280" y="64" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Нет</text></switch></g>
<rect x="435" y="230" width="50" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 240px; margin-left: 436px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">No</div>
	</div>
</div>
</foreignObject>
<text x="460" y="244" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Нет</text></switch></g>
<rect x="255" y="250" width="50" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 260px; margin-left: 256px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">No</div>
	</div>
</div>
</foreignObject>
<text x="280" y="264" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Нет</text></switch></g>
<rect x="85" y="440" width="50" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 450px; margin-left: 86px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">No</div>
	</div>
</div>
</foreignObject>
<text x="110" y="454" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Нет</text></switch></g>
<rect x="155" y="110" width="45" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 43px; height: 1px; padding-top: 120px; margin-left: 156px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Yes</div>
	</div>
</div>
</foreignObject>
<text x="178" y="124" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Да</text></switch></g>
<rect x="200" y="320" width="45" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 43px; height: 1px; padding-top: 330px; margin-left: 201px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Yes</div>
	</div>
</div>
</foreignObject>
<text x="223" y="334" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Да</text></switch></g>
<rect x="355" y="265" width="45" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 43px; height: 1px; padding-top: 275px; margin-left: 356px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Yes</div>
	</div>
</div>
</foreignObject>
<text x="378" y="279" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Да</text></switch></g>
<rect x="200" y="505" width="45" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 43px; height: 1px; padding-top: 515px; margin-left: 201px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Yes</div>
	</div>
</div>
</foreignObject>
<text x="223" y="519" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Yes</text></switch></g>
<path d="M 195 500 L 195 533.63" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 195 538.88 L 191.5 531.88 L 195 533.63 L 198.5 531.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 135 465 L 110 465 L 110 593.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 110 598.88 L 106.5 591.88 L 110 593.63 L 113.5 591.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 195 430 L 255 465 L 195 500 L 135 465 Z"
	fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 465px; margin-left: 136px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Message<br />received?
		</div>
	</div>
</div>
</foreignObject>
<text x="195" y="469" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Сообщение&#xa;получено?</text></switch></g>
<path d="M 255 560 L 275 560 L 275 410 L 195 410 L 195 423.63"
	fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="stroke" />
<path d="M 195 428.88 L 191.5 421.88 L 195 423.63 L 198.5 421.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<rect x="135" y="540" width="120" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 560px; margin-left: 136px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Send via <br />bluetooth
		</div>
	</div>
</div>
</foreignObject>
<text x="195" y="564" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Отправить по...</text></switch></g>
<rect x="170" y="620" width="45" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 43px; height: 1px; padding-top: 630px; margin-left: 171px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Yes</div>
	</div>
</div>
</foreignObject>
<text x="193" y="634" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Да</text></switch></g>
<rect x="0" y="640" width="50" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 650px; margin-left: 1px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">No</div>
	</div>
</div>
</foreignObject>
<text x="25" y="654" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Нет</text></switch></g>
<path d="M 195 40 L 195 0" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" /></g>
<switch>
<g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" />
<a transform="translate(0,-5)"
	xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems"
	target="_blank"><text text-anchor="middle" font-size="10px" x="50%"
		y="100%">Text is not SVG - cannot display</text></a></switch></svg>

</div>
<p>Firstly, I need the firmware to support both deep sleep mode and AT commands. AT commands are extremely convenient for debugging. However, the serial bus is not available in deep sleep mode. To overcome this, I created a special inactivity timer. If there are no commands for a certain period, the processor goes into deep sleep mode. In this mode, it periodically wakes up, receives the time of the next observation via Bluetooth, and goes back to sleep. Since the wake-up cycle is quite short, it&rsquo;s practically impossible to send an AT command. To send an AT command to the device in deep sleep mode, you need to manually restart the ESP32. It&rsquo;s a bit inconvenient, but you can live with it during debugging or temporarily disable deep sleep mode.</p>
<p>Secondly, Bluetooth is used for communication with Raspberry Pi. This protocol is not the most energy-efficient, and it would be logical to use LoRa to send data. Unfortunately, Raspberry Pi does not have a LoRa module, and a separate one is <a href="https://thepihut.com/products/sx1262-lora-hat-for-raspberry-pi-868mhz-for-europe-asia-africa">quite expensive</a>. The good news is that both ESP32 and Raspberry Pi support the energy-efficient version of Bluetooth - Bluetooth Low Energy (BLE), which makes sense to use. Integration via Bluetooth deserves a separate article.</p>
<h2 id="power-consumption-measurement">Power Consumption Measurement</h2>
<p>At this point, I was hit by vibes from physics laboratory work at the university. With one exception - this time I&rsquo;m really interested in understanding the physics of the process. For measurements, I used the A3-B USB tester, which I reviewed in one of the <a href="https://dernasherbrezon.com/en/posts/smart-usb-meter-a3-b/">previous articles</a>. The results were as follows:</p>
<ul>
<li>In deep sleep mode: 6 mA</li>
<li>In signal reception mode: 86 mA</li>
</ul>
<p>On average, all satellites with LoRa transmitters pass by for 313 minutes a day. Then all the remaining deep sleep time will be 1127 minutes. Total:</p>
<pre tabindex="0"><code>323 min * 86 mA + 1127 min * 6 mA = 575.66 mAh
</code></pre><p>Or in terms of power:</p>
<pre tabindex="0"><code>575.66 mAh * 3.3 V = 1.8997 Wh
</code></pre><p>1.8997 Wh per day. It&rsquo;s not entirely clear whether this is a lot or a little. To understand this, we need to estimate the theoretical power that can be obtained from solar panels.</p>
<h2 id="theoretical-power">Theoretical Power</h2>
<p>In <a href="https://www.youtube.com/watch?v=WdP4nVQX-j0">this video</a>, it is explained very well how to calculate the theoretical power from solar panels. In my case, the input parameters are as follows:</p>
<ul>
<li>City: London</li>
<li>6V 1W solar panel with an area of 11 cm * 6 cm. Yes, I chose the smallest 6V solar panel. But I got three at a discount.</li>
<li>Average efficiency of such panels - 15%</li>
<li>Controller and voltage reduction efficiency are considered an additional 5%</li>
<li>Panel orientation - strictly upward</li>
<li>Month: December. The cloudiest month of the year with the shortest duration of daylight.</li>
</ul>
<p>Total:</p>
<pre tabindex="0"><code>600 Wh/m2 * (15% - 5%) = 60 Wh/m2 = 0.006 Wh/cm2
</code></pre><p>Converted to my solar panel:</p>
<pre tabindex="0"><code>0.006 Wh/cm2 * (11 cm * 6 cm) = 0.396 Wh
</code></pre><p>The calculations are very averaged, and energy may be twice as much on one sunny day and half as much on another day. Nevertheless, it turns out that my solar panel won&rsquo;t be enough (0.396 Wh &lt; 1.8997 Wh).</p>
<p>Since it won&rsquo;t be enough for a whole day, maybe it will be just enough for a bit? To find out, I opened <a href="https://en.tutiempo.net/solar-radiation/london.html">this website</a> to see how much energy I can theoretically get with an hourly breakdown.</p>
<p><img src="/posts/lora-deep-sleep/img/3.png"></p>
<p>So, at 12 PM, I can get 221 Wh/m2.</p>
<pre tabindex="0"><code>221 Wh/m2 * (15% - 5%) = 22.1 Wh/m2 = 0.00221 Wh/cm2 * (11 cm * 6 cm) = 0.14586 Wh
</code></pre><p>And the average consumption of ESP32:</p>
<pre tabindex="0"><code>1.8997 Wh / 24 = 0.07915 Wh
</code></pre><p>It turns out that there will be enough energy. Thus, the entire station will start around 11-12, work for at most one or two hours, and turn off until the next day. The battery will constantly be in a discharged state and will only charge slightly at 0.06671 Wh, to then discharge again.</p>
<h2 id="power-consumption-optimization">Power Consumption Optimization</h2>
<p>The most obvious methods that come to mind without Google:</p>
<ul>
<li>Connect another small panel. 0.396 Wh * 2 = 0.792 Wh - still not great.</li>
<li>Move to Dubai.</li>
<li>Reduce the number of satellite observations.</li>
<li>Optimize the code.</li>
</ul>
<p>The third and fourth points look very enticing. So, if we leave only one observation per day:</p>
<pre tabindex="0"><code>10 min * 86 mA + 1430 min * 6 mA = 860 mAmin + 8580 mAmin = 157.33 mAh * 3.3 V = 519.2 Wh
</code></pre><p>Even for one observation per day, one solar panel will be insufficient. At least two are needed.</p>
<p>It&rsquo;s time to optimize the code.</p>
<h2 id="code-optimization">Code Optimization</h2>
<p>In the table below, I&rsquo;ve compiled all the techniques I could find on the internet.</p>
<table>
	<thead>
		<tr>
			<th>Method</th>
			<th>Consumption</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Default empty project</td>
			<td>70mA</td>
		</tr>
		<tr>
			<td>Enabled LoRa receiver</td>
			<td>86mA</td>
		</tr>
		<tr>
			<td>Empty project with reduced frequency - 80 MHz<br/>Minimum frequency for Bluetooth operation</td>
			<td>30mA</td>
		</tr>
		<tr>
			<td>Enabled LoRa receiver with reduced ESP32 frequency</td>
			<td>46mA</td>
		</tr>
		<tr>
			<td>Deep sleep</td>
			<td>6mA</td>
		</tr>
		<tr>
			<td><a href="https://github.com/Heltec-Aaron-Lee/WiFi_Kit_series/issues/6#issuecomment-403254130">Using power through JST connector</a>, not 5V USB</td>
			<td>Apparently small currents, and  <a href="https://www.youtube.com/watch?v=LUB8RWzzLWc">measuring with a multimeter may not work</a></td>
		</tr>
		<tr>
			<td>Enabled LoRa receiver with ESP32 in deep sleep</td>
			<td>16mA</td>
		</tr>
	</tbody>
</table>
<p>So, the most interesting method is the last one. I accidentally stumbled upon it in <a href="https://learn.circuit.rocks/esp32-lora-gateway-battery-optimized">this article</a>. The point is that the ESP32 can wake up from deep sleep in several ways - by timer, by changing the voltage on an external pin, or by interrupt. Moreover, when the LoRa receiver receives a message, it also generates an interrupt! The working algorithm in this case is as follows:</p>
<div>


	<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg"
	xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
	viewBox="-0.5 -0.5 486 791">
<defs />
<g>
<path d="M 195 260 L 195 293.63" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 195 298.88 L 191.5 291.88 L 195 293.63 L 198.5 291.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<rect x="135" y="220" width="120" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 240px; margin-left: 136px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Receive<br />observation time<br />
		</div>
	</div>
</div>
</foreignObject>
<text x="195" y="244" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Получитьвремя
наблюдения...</text></switch></g>
<path d="M 255 65 L 355 65 L 355 173.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 355 178.88 L 351.5 171.88 L 355 173.63 L 358.5 171.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 195 100 L 195 120 L 195 100 L 195 113.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 195 118.88 L 191.5 111.88 L 195 113.63 L 198.5 111.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 195 30 L 255 65 L 195 100 L 135 65 Z"
	fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 65px; margin-left: 136px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			<span
				style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; text-align: center; text-indent: 0px; text-transform: none; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 249, 250); text-decoration: none; float: none; display: inline !important;">Exit
				from</span><br
				style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; text-align: center; text-indent: 0px; text-transform: none; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration: none;" />
			<span
				style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; text-align: center; text-indent: 0px; text-transform: none; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(248, 249, 250); text-decoration: none; float: none; display: inline !important;">sleep?</span>
		</div>
	</div>
</div>
</foreignObject>
<text x="195" y="69" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Выход из...</text></switch></g>
<path d="M 255 345 L 355 345 L 355 743.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 355 748.88 L 351.5 741.88 L 355 743.63 L 358.5 741.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 195 390 L 195 410 L 195 400 L 195 413.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 195 418.88 L 191.5 411.88 L 195 413.63 L 198.5 411.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 195 300 L 255 345 L 195 390 L 135 345 Z"
	fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 345px; margin-left: 136px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Ready for<br />observation?
		</div>
	</div>
</div>
</foreignObject>
<text x="195" y="349" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Настало время...</text></switch></g>
<path d="M 355 220 L 355 253.63" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 355 258.88 L 351.5 251.88 L 355 253.63 L 358.5 251.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<rect x="295" y="180" width="120" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 200px; margin-left: 296px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Await
			command</div>
	</div>
</div>
</foreignObject>
<text x="355" y="204" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Ожидать команду</text></switch></g>
<rect x="295" y="750" width="120" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 770px; margin-left: 296px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Enter
			deep sleep</div>
	</div>
</div>
</foreignObject>
<text x="355" y="774" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Перейти в режим сна</text></switch></g>
<path d="M 355 330 L 355 743.63" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 355 748.88 L 351.5 741.88 L 355 743.63 L 358.5 741.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 435 295 L 455 295 L 455 200 L 421.37 200" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 416.12 200 L 423.12 196.5 L 421.37 200 L 423.12 203.5 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 355 260 L 435 295 L 355 330 L 275 295 Z"
	fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 295px; margin-left: 276px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Inactivity <br />timeout?
		</div>
	</div>
</div>
</foreignObject>
<text x="355" y="299" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Таймер...</text></switch></g>
<path d="M 195 460 L 195 493.63" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 195 498.88 L 191.5 491.88 L 195 493.63 L 198.5 491.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<rect x="135" y="420" width="120" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 440px; margin-left: 136px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Start
			LoRa RX</div>
	</div>
</div>
</foreignObject>
<text x="195" y="444" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Запустить приёмник LoRa</text></switch></g>
<path d="M 170 710 L 355 710 L 355 743.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 355 748.88 L 351.5 741.88 L 355 743.63 L 358.5 741.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 50 710 L 25 710 L 25 480 L 188.63 480" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 193.88 480 L 186.88 483.5 L 188.63 480 L 186.88 476.5 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 110 670 L 170 710 L 110 750 L 50 710 Z"
	fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 710px; margin-left: 51px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Observation<br />complete?
		</div>
	</div>
</div>
</foreignObject>
<text x="110" y="714" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Наблюдение&#xa;завершено?</text></switch></g>
<rect x="255" y="40" width="50" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 50px; margin-left: 256px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">No</div>
	</div>
</div>
</foreignObject>
<text x="280" y="54" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Нет</text></switch></g>
<rect x="435" y="300" width="50" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 310px; margin-left: 436px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">No</div>
	</div>
</div>
</foreignObject>
<text x="460" y="314" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Нет</text></switch></g>
<rect x="255" y="320" width="50" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 330px; margin-left: 256px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">No</div>
	</div>
</div>
</foreignObject>
<text x="280" y="334" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Нет</text></switch></g>
<rect x="85" y="510" width="50" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 520px; margin-left: 86px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">No</div>
	</div>
</div>
</foreignObject>
<text x="110" y="524" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Нет</text></switch></g>
<rect x="90" y="120" width="45" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 43px; height: 1px; padding-top: 130px; margin-left: 91px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Yes</div>
	</div>
</div>
</foreignObject>
<text x="113" y="134" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Да</text></switch></g>
<rect x="200" y="390" width="45" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 43px; height: 1px; padding-top: 400px; margin-left: 201px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Yes</div>
	</div>
</div>
</foreignObject>
<text x="223" y="404" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Да</text></switch></g>
<rect x="355" y="335" width="45" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 43px; height: 1px; padding-top: 345px; margin-left: 356px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Yes</div>
	</div>
</div>
</foreignObject>
<text x="378" y="349" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Да</text></switch></g>
<rect x="200" y="575" width="45" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 43px; height: 1px; padding-top: 585px; margin-left: 201px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Yes</div>
	</div>
</div>
</foreignObject>
<text x="223" y="589" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Да</text></switch></g>
<path d="M 195 570 L 195 603.63" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 195 608.88 L 191.5 601.88 L 195 603.63 L 198.5 601.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 135 535 L 110 535 L 110 663.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 110 668.88 L 106.5 661.88 L 110 663.63 L 113.5 661.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 195 500 L 255 535 L 195 570 L 135 535 Z"
	fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 535px; margin-left: 136px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Message<br />received?
		</div>
	</div>
</div>
</foreignObject>
<text x="195" y="539" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Сообщение&#xa;получено?</text></switch></g>
<path d="M 255 630 L 275 630 L 275 480 L 195 480 L 195 493.63"
	fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="stroke" />
<path d="M 195 498.88 L 191.5 491.88 L 195 493.63 L 198.5 491.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<rect x="135" y="610" width="120" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 630px; margin-left: 136px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Send via <br />bluetooth
		</div>
	</div>
</div>
</foreignObject>
<text x="195" y="634" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Отправить по...</text></switch></g>
<rect x="170" y="690" width="45" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 43px; height: 1px; padding-top: 700px; margin-left: 171px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Yes</div>
	</div>
</div>
</foreignObject>
<text x="193" y="704" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Да</text></switch></g>
<rect x="0" y="710" width="50" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 720px; margin-left: 1px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">No</div>
	</div>
</div>
</foreignObject>
<text x="25" y="724" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Нет</text></switch></g>
<path d="M 195 30 L 195 0" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 195 190 L 195 210 L 195 200 L 195 213.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 195 218.88 L 191.5 211.88 L 195 213.63 L 198.5 211.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 135 155 L 65 155 L 65 213.63" fill="none"
	stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 65 218.88 L 61.5 211.88 L 65 213.63 L 68.5 211.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 195 120 L 255 155 L 195 190 L 135 155 Z"
	fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 155px; margin-left: 136px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Wake up<br />from interrupt?
		</div>
	</div>
</div>
</foreignObject>
<text x="195" y="159" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Выход по...</text></switch></g>
<rect x="145" y="190" width="50" height="20" fill="none" stroke="none"
	pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 200px; margin-left: 146px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">No</div>
	</div>
</div>
</foreignObject>
<text x="170" y="204" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Нет</text></switch></g>
<path
	d="M 65 350 L 65 477 C 68.9 477 68.9 483 65 483 L 65 483 L 65 630 L 107 630 C 107 626.1 113 626.1 113 630 L 113 630 L 128.63 630"
	fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="stroke" />
<path d="M 133.88 630 L 126.88 633.5 L 128.63 630 L 126.88 626.5 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<path d="M 65 260 L 65 293.63" fill="none" stroke="rgb(0, 0, 0)"
	stroke-miterlimit="10" pointer-events="stroke" />
<path d="M 65 298.88 L 61.5 291.88 L 65 293.63 L 68.5 291.88 Z"
	fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10"
	pointer-events="all" />
<rect x="25" y="220" width="80" height="40" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 240px; margin-left: 26px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Handle<br />interrupt
		</div>
	</div>
</div>
</foreignObject>
<text x="65" y="244" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Обработать&#xa;прерывание</text></switch></g>
<rect x="25" y="300" width="80" height="50" fill="rgb(255, 255, 255)"
	stroke="rgb(0, 0, 0)" pointer-events="all" />
<g transform="translate(-0.5 -0.5)">
<switch>
<foreignObject pointer-events="none" width="100%" height="100%"
	requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"
	style="overflow: visible; text-align: left;">
<div xmlns="http://www.w3.org/1999/xhtml"
	style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 325px; margin-left: 26px;">
	<div data-drawio-colors="color: rgb(0, 0, 0); "
		style="box-sizing: border-box; font-size: 0px; text-align: center;">
		<div
			style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
			Restore<br />received <br />status
		</div>
	</div>
</div>
</foreignObject>
<text x="65" y="329" fill="rgb(0, 0, 0)" font-family="Helvetica"
	font-size="12px" text-anchor="middle">Восстановитьстатус...</text></switch></g></g>
<switch>
<g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" />
<a transform="translate(0,-5)"
	xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems"
	target="_blank"><text text-anchor="middle" font-size="10px" x="50%"
		y="100%">Text is not SVG - cannot display</text></a></switch></svg>

</div>
<p>The corresponding configuration:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#a6e22e">pinMode</span>(RST, INPUT_PULLUP);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">esp_sleep_enable_ext0_wakeup</span>((<span style="color:#66d9ef">gpio_num_t</span>)DIO0, RISING);
</span></span></code></pre></div><p>The LoRa receiver will continue to work even if the ESP32 goes into sleep mode. Power consumption in active mode will be reduced from 86 mA to 16 mA - more than 5 times!</p>
<pre tabindex="0"><code>323 min * 16 mA + 1127 min * 6 mA = 5168 mAmin + 6762 mAmin =
= 198.83 mAh * 3.3 V = 656.15 Wh
</code></pre><p>Two small panels will be enough to receive all passing satellites.</p>
<p>Unfortunately, none of the existing libraries allow reading messages from LoRa after waking up from sleep. I had to take <a href="https://github.com/sandeepmistry/arduino-LoRa">arduino-LoRa</a> and modify it.</p>
<h2 id="conclusion">Conclusion</h2>
<p>And then I went out to the balcony and realized that it faces north&hellip;</p>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'><div class='tags'><svg class='icon' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>

</svg>
<span class='screen-reader-text'>Tags: </span><a class='tag' href='/en/tags/c/'>C</a>, <a class='tag' href='/en/tags/lora/'>Lora</a>, <a class='tag' href='/en/tags/esp32/'>Esp32</a>, <a class='tag' href='/en/tags/embedded/'>Embedded</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/en/posts/smart-usb-meter-a3-b/'>
        <span aria-hidden='true'><svg class='icon' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>

</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>USB-tester A3-B</a>
    </div><div class='next-entry sep-before'>
      <a href='/en/posts/sx127x/'>
        <span class='screen-reader-text'>Next post: </span>sx127x<span aria-hidden='true'>Next <svg class='icon' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>

</svg>
</span>
      </a>
    </div></div>
</nav>


<section id='comments' class='comments'>
  <div class='container sep-before'>
    <div class='comments-area'><script>
  var remark_config = {
    host: "https://remark42.dernasherbrezon.com", 
    site_id: '9134',
    locale: 'en',
    components: ['embed'] 
                          
                          
                          
                          
                          
  };

  (function(c) {
    for(var i = 0; i < c.length; i++){
      var d = document, s = d.createElement('script');
      s.src = remark_config.host + '/web/' +c[i] +'.js';
      s.defer = true;
      (d.head || d.body).appendChild(s);
    }
  })(remark_config.components || ['embed']);
</script>
<div id="remark42"></div>
</div>
  </div>
</section>

      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><section class='widget widget-social_menu sep-after'><nav aria-label='Social Menu'>
    <ul><li>
        <a href='https://github.com/dernasherbrezon' target='_blank' rel='noopener me'>
          <span class='screen-reader-text'>Open Github account in new tab</span><svg class='icon' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    
      <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>

</svg>
</a>
      </li><li>
        <a href='https://twitter.com/dernasherbrezon' target='_blank' rel='noopener me'>
          <span class='screen-reader-text'>Open Twitter account in new tab</span><svg class='icon' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    
  <title>Twitter icon</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>

</svg>
</a>
      </li><li>
        <a href='mailto:dernasherbrezon@gmail.com' target='_blank' rel='noopener me'>
          <span class='screen-reader-text'>Contact via Email</span><svg class='icon' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>
</svg>
</a>
      </li><li>
        <a href='https://t.me/dernasherbrezonChannel' target='_blank' rel='noopener me'>
          <span class='screen-reader-text'>Open Telegram account in new tab</span><svg class='icon' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <title>Telegram icon</title><path d="M23.91 3.79L20.3 20.84c-.25 1.21-.98 1.5-2 .94l-5.5-4.07-2.66 2.57c-.3.3-.55.56-1.1.56-.72 0-.6-.27-.84-.95L6.3 13.7l-5.45-1.7c-1.18-.35-1.19-1.16.26-1.75l21.26-8.2c.97-.43 1.9.24 1.53 1.73z"/>
</svg>
</a>
      </li></ul>
  </nav>
</section><div class='copyright'>
  <p><a href="https://creativecommons.org/licenses/by-nc-nd/3.0/">CC BY-NC-ND 3.0</a> &copy; 2017-2024 dernasherbrezon </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="/assets/js/"</script>

<script src='/assets/js/main.c3bcf2df.js'></script>
</body>

</html>

