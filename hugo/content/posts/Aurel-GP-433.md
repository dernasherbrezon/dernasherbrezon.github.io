---
title: "Антенна Aurel GP 433"
date: 2022-01-21T12:10:18+00:00
draft: false
chartjs: true
tags:
  - спутники
  - radio
---

Недавно я получил в подарок вот такую замечательную антенну - Aurel GP 433:

![](/img/Aurel-GP-433/antenna.jpg)

Она работает на частоте 433МГц в [ISM диапазоне](https://en.wikipedia.org/wiki/ISM_radio_band) и позволяет получать сигналы со спутников, смодулированные с помощью технологии [LoRa](https://en.wikipedia.org/wiki/LoRa).

С её помощью мне удалось принять несколько пакетов со спутника [NORBI](https://db.satnogs.org/satellite/DNNN-7162-2135-4056-8903). Он как раз передаёт на частоте 433Мгц. Далее мне захотелось понять характеристики антенны на частоте 401Мгц. На ней передают недавно запущенные спутники семейства [FOSSASAT](https://db.satnogs.org/search/?q=FOSSASAT).

Для этого я измерил коэффициент обратных потерь для разных частот. Получившийся график ниже (чем меньше, тем лучше):

{{< chartjs url="/static/img/Aurel-GP-433/data.json" id="aurelgp433" title="Aurel GP 433" datasource="returnLoss" datasourceLabel="Обратная потеря" yAxisLabel="Обратная потеря" yAxisUnit="дБ"  xAxis="frequency" xAxisLabel="Частота" xAxisUnit="МГц" staticSrc="/img/Aurel-GP-433/aurelgp433.png">}}

Разница между 433Мгц и 401Мгц около 10Дб! Это достаточно много и, мне кажется, шансов принять сигнал на эту антенну крайне мало.

## Получение данных для графика

Отдельно хочется описать схему получения данных для графика. 

### NanoVNA H4

Для измерений я использовал [NanoVNA H4](https://www.amazon.co.uk/Nanovna-H4-10k-1-5GHz-Touchscreen-Measuring-Parameters/dp/B08P4Z44ZV). Инструкций по настройке и использованию подобных устройств в Интернете достаточно много, поэтому я не буду на этом останавливаться.

### nanovna-saver

NanoVNA H4 выводит классный график на экран, но для того, чтобы получить цифры, нужно использовать специальную программу. Я взял [nanovna-saver](https://github.com/NanoVNA-Saver/nanovna-saver). Во-первых, она заработала у меня на MacOS. А во-вторых, она позволяет экспортировать значения в текстовый файл. Возможно, в Интернете есть командные утилиты, которые могут просто считать данные в консоль, но с наскоку мне не удалось их найти.

### Обработка файла

nanovna-saver экспортирует файлы в формате [Touchstone](https://ibis.org/connector/touchstone_spec11.pdf). Это такой древний формат файлов, который используется для хранения измерений различных сетей. Несмотря на свою простоту и изначальную проприетарность, он стал стандартом де-факто в индустрии.

Формат его следующий:

```
# HZ S RI R 50
20000000 -0.760943531 0.559754431
24800000 -0.045752331 0.932080805
```

Сначала идёт заголовок с описанием данных, которые хранятся в файле. В моём примере это:

 * ```HZ``` - единица измерения частоты. Герц. Может быть еще MHZ, KHZ и так далее.
 * ```S``` - тип данных. "S" - "Scattering parameters".
 * ```RI``` - формат данных. В данном случае - это real и imag (реальная и мнимая часть) комплексного числа. Это комплексное число описывает отражённую волну.
 * ```R 50``` - измерения для импеданса в 50 Ом.
 
Каждая строчка содержит частоту, вещественную часть и мнимую часть волны. Для того, чтобы получить магнитуду нужно выполнить:

```
20 * LOG10(SQRT(real*real + imag*imag))
```